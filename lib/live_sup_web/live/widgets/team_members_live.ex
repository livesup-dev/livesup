defmodule LiveSupWeb.Live.Widgets.TeamMembersLive do
  use LiveSupWeb.Live.Widgets.WidgetLive

  @impl true
  def render_widget(assigns) do
    ~H"""
    <.live_component module={SmartRenderComponent} id={@widget_data.id} let={widget_data} widget_data={@widget_data}>
      <!-- Team Members -->
        <.live_component module={WidgetHeaderComponent} id={"#{widget_data.id}-header"} widget_data={widget_data} />
        <!-- Widget Content -->
        <div class="items-center p-2 bg-white rounded-md dark:bg-darker min-h-[132px]">
          <%= if Enum.any?(widget_data.data) do %>
          <div class="divide-y divide-gray-100 dark:divide-gray-500">
              <%= for user <- widget_data.data do %>
                <div class="flex py-4 first:pt-0 gap-4 flex-wrap dark:divide-blue-300">
                  <div class="flex-none relative">
                    <img src={user[:avatar]} class="w-14 h-14 rounded-full transition-opacity duration-200 "/>
                    <%= if user[:night] == true do %>
                    <i class="absolute bottom-2 right-0 rounded-full bg-slate-700 p-[1px]"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                    </svg></i>
                    <% else %>
                    <i class="absolute bottom-2 right-0 rounded-full bg-slate-700 p-[1px]"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="rgb(252, 211, 77)">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg></i>
                    <% end %>
                  </div>
                  <div class="grow">
                    <p>
                      <strong><%= user[:full_name] %></strong> <br>
                      <span class="text-sm"><%= user[:address] %></span> <br>
                      <span class="text-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <date class=" align-middle inline-block"><%= user[:now_str] %></date>
                      </span>
                    </p>
                  </div>
                </div>
              <% end %>
            </div>
            <% else %>
              <svg  class="h-20 w-20 m-auto" version="1.1" id="no-team-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
              <polygon style="fill:#ABB9C6;" points="346.4,478.938 165.605,478.938 178.512,448.737 183.427,437.253 194.153,412.162
                317.852,412.162 328.578,437.253 333.492,448.737 "/>
              <polygon style="fill:#93A0AA;" points="328.578,437.253 183.427,437.253 194.153,412.162 317.852,412.162 "/>
              <path style="fill:#B6C7D3;" d="M393.462,490.425H118.535l0,0c9.791-14.369,26.054-22.967,43.442-22.967h188.043
                C367.408,467.458,383.67,476.056,393.462,490.425L393.462,490.425z"/>
              <path style="fill:#ABB9C6;" d="M512,55.095v326.991c0,18.511-14.997,33.52-33.509,33.52H33.509C14.997,415.606,0,400.597,0,382.086
                V55.095c0-18.511,14.997-33.52,33.509-33.52h444.983C497.003,21.575,512,36.584,512,55.095z"/>
              <path style="fill:#C5D6E2;" d="M512,55.095v326.991c0,18.511-14.997,33.52-33.509,33.52H180.898l24.552-59.875L342.47,21.575
                h136.021C497.003,21.575,512,36.584,512,55.095z"/>
              <path style="fill:#93A0AA;" d="M256.002,393.214c-3.448,0-6.634-2.135-7.958-5.317c-1.465-3.521-0.359-7.694,2.622-10.058
                c6.24-4.949,15.53,0.968,13.723,8.703C263.488,390.388,259.968,393.214,256.002,393.214z"/>
              <path style="fill:#B8E9F2;" d="M512,55.095v300.637H0V55.095c0-18.511,14.997-33.52,33.509-33.52h444.983
                C497.003,21.575,512,36.584,512,55.095"/>
              <path style="fill:#D4F7FC;" d="M512,55.095v300.637H205.45L342.47,21.576h136.021C497.003,21.575,512,36.584,512,55.095"/>
              <path style="fill:#609DC6;" d="M319.923,300.532H192.078c0-34.726,27.698-62.998,62.217-63.905c0.574-0.011,1.137-0.023,1.711-0.023
                C291.306,236.603,319.923,265.232,319.923,300.532"/>
              <path style="fill:#3E759B;" d="M269.784,238.113c-4.439-0.976-9.048-1.507-13.78-1.507c-35.305,0-63.925,28.62-63.925,63.925h27.56
                C219.639,269.96,241.106,244.417,269.784,238.113"/>
              <path style="fill:#E8D358;" d="M160.55,300.532c0-28.59-23.177-51.767-51.767-51.767c-28.589,0-51.767,23.177-51.767,51.767"/>
              <path style="fill:#D8C150;" d="M122.529,250.625c-4.379-1.203-8.986-1.86-13.747-1.86c-28.589,0-51.767,23.177-51.767,51.767h27.494
                C84.509,276.703,100.614,256.648,122.529,250.625z"/>
              <path style="fill:#F75757;" d="M454.991,300.532c0-28.59-23.177-51.767-51.766-51.767c-28.59,0-51.767,23.176-51.767,51.767H454.991
                "/>
              <path style="fill:#DB4949;" d="M416.971,250.625c-4.38-1.203-8.985-1.86-13.747-1.86c-28.59,0-51.767,23.176-51.767,51.767h27.495
                C378.952,276.703,395.056,256.648,416.971,250.625"/>
              <path style="fill:#EFD9A8;" d="M319.923,184.17c0,35.3-28.617,63.917-63.917,63.917c-0.563,0-1.125-0.011-1.688-0.023
                c-34.531-0.896-62.24-29.156-62.24-63.894c0-35.312,28.617-63.928,63.928-63.928c16.881,0,32.222,6.546,43.648,17.237
                C312.125,149.134,319.923,165.739,319.923,184.17"/>
              <path style="fill:#DDC697;" d="M223.084,184.167c0-29.957,20.61-55.091,48.422-62.021c-4.964-1.237-10.156-1.903-15.503-1.903
                c-35.305,0-63.925,28.62-63.925,63.925s28.62,63.925,63.925,63.925c5.347,0,10.538-0.666,15.503-1.903
                C243.694,239.257,223.084,214.123,223.084,184.167"/>
              <path style="fill:#EFD9A8;" d="M454.991,208.482c0-28.59-23.177-51.766-51.766-51.766c-28.59,0-51.767,23.176-51.767,51.766
                s23.178,51.767,51.767,51.767C431.815,260.248,454.991,237.072,454.991,208.482"/>
              <path style="fill:#DDC697;" d="M381.314,208.482c0-23.399,15.528-43.162,36.839-49.571c-4.728-1.422-9.737-2.196-14.928-2.196
                c-28.59,0-51.767,23.176-51.767,51.766s23.178,51.767,51.767,51.767c5.192,0,10.201-0.773,14.928-2.196
                C396.843,251.644,381.314,231.88,381.314,208.482"/>
              <circle style="fill:#EFD9A8;" cx="108.783" cy="208.482" r="51.767"/>
              <path style="fill:#DDC697;" d="M86.872,208.482c0-23.399,15.528-43.162,36.839-49.571c-4.728-1.422-9.737-2.196-14.928-2.196
                c-28.589,0-51.767,23.177-51.767,51.766c0,28.59,23.177,51.767,51.767,51.767c5.192,0,10.201-0.773,14.928-2.196
                C102.4,251.644,86.872,231.88,86.872,208.482z"/>
              <path style="fill:#D4F7FC;" d="M351.457,208.482L351.457,208.482c0-28.59,23.178-51.766,51.767-51.766c0.049,0,0.099,0,0.149,0
                c0.017,0,0.03,0,0.047,0c0.034,0,0.069,0,0.102,0c0.017,0,0.037,0,0.054,0c0.037,0,0.075,0,0.111,0.001
                c0.037,0,0.076,0.001,0.113,0.001c0.014,0,0.028,0,0.042,0c0.037,0,0.073,0.001,0.109,0.001c0.001,0,0.001,0,0.001,0
                c28.253,0.392,51.037,23.416,51.037,51.762c0,20.042-11.388,37.422-28.047,46.026c16.659,8.602,28.047,25.984,28.047,46.026H351.457
                l0,0c0-20.042,11.389-37.422,28.048-46.026C362.846,245.904,351.457,228.522,351.457,208.482L351.457,208.482 M478.491,21.575
                H342.47l-46.286,112.881c1.193,0.966,2.351,1.974,3.47,3.021c12.471,11.656,20.268,28.261,20.268,46.692
                c0,25.841-15.338,48.103-37.405,58.176c22.067,10.077,37.405,32.344,37.405,58.185h-91.838l-22.635,55.201H512V55.095
                C512,36.584,497.003,21.575,478.491,21.575"/>
              <path style="fill:#7EAECF;" d="M282.518,242.346c-6.358,2.903-13.274,4.793-20.545,5.466c-1.965,0.184-3.956,0.278-5.97,0.278
                c-2.122,0-4.22-0.103-6.289-0.305l-21.629,52.747h91.838C319.923,274.69,304.585,252.423,282.518,242.346"/>
              <path style="fill:#F67676;" d="M426.943,254.506c-6.903,3.564-14.708,5.622-22.985,5.736c-0.002,0-0.006,0-0.008,0
                c-0.037,0-0.07,0.001-0.107,0.001c-0.015,0-0.03,0-0.046,0c-0.031,0-0.064,0.001-0.095,0.001c-0.041,0-0.083,0.001-0.124,0.001
                c-0.02,0-0.039,0-0.057,0c-0.033,0-0.068,0-0.101,0c-0.017,0-0.03,0-0.048,0c-0.049,0-0.099,0-0.148,0l0,0
                c-1.597,0-3.179-0.072-4.738-0.214c-11.904,9.481-19.534,24.095-19.534,40.497h-27.495l0,0h103.533
                C454.991,280.491,443.602,263.109,426.943,254.506"/>
              <path style="fill:#E06B6B;" d="M379.505,254.506c-16.659,8.602-28.048,25.984-28.048,46.026l0,0h27.495
                c0-16.403,7.631-31.017,19.534-40.497C391.695,259.419,385.284,257.491,379.505,254.506"/>
              <path style="fill:#F0DEB7;" d="M296.184,134.456l-42.701,104.137c5.509,3.399,11.573,5.986,18.023,7.594
                c-3.095,0.771-6.279,1.321-9.534,1.625c7.27-0.673,14.187-2.563,20.545-5.466c22.067-10.073,37.405-32.335,37.405-58.176
                c0-18.431-7.797-35.036-20.268-46.692C298.533,136.43,297.377,135.423,296.184,134.456L296.184,134.456"/>
              <path style="fill:#E2CFAA;" d="M253.483,238.593l-3.769,9.191c2.069,0.202,4.167,0.305,6.289,0.305c2.013,0,4.004-0.094,5.97-0.278
                c3.254-0.304,6.438-0.853,9.534-1.625C265.056,244.58,258.991,241.993,253.483,238.593"/>
              <path style="fill:#F0DEB7;" d="M403.421,260.248c-0.016,0-0.032,0-0.048,0C403.391,260.248,403.404,260.248,403.421,260.248
                M403.579,260.247c-0.02,0-0.039,0-0.057,0C403.54,260.248,403.56,260.247,403.579,260.247 M403.799,260.245
                c-0.032,0-0.063,0-0.095,0.001C403.734,260.245,403.766,260.245,403.799,260.245 M403.95,260.243c-0.036,0-0.071,0.001-0.107,0.001
                C403.88,260.244,403.913,260.244,403.95,260.243 M403.954,156.72c4.931,0.069,9.693,0.835,14.199,2.19
                c-21.311,6.409-36.839,26.173-36.839,49.571s15.528,43.163,36.839,49.572c-4.505,1.355-9.265,2.121-14.195,2.19
                c8.277-0.115,16.083-2.172,22.985-5.736c16.659-8.602,28.047-25.984,28.047-46.026C454.991,180.136,432.206,157.112,403.954,156.72
                M403.843,156.719c0.037,0,0.073,0.001,0.109,0.001C403.917,156.72,403.88,156.719,403.843,156.719 M403.688,156.717
                c0.037,0,0.075,0.001,0.113,0.001C403.764,156.718,403.725,156.718,403.688,156.717 M403.523,156.717c0.018,0,0.036,0,0.054,0
                C403.56,156.717,403.54,156.717,403.523,156.717 M403.374,156.715c0.016,0,0.032,0,0.047,0
                C403.404,156.715,403.391,156.715,403.374,156.715"/>
              <path style="fill:#E2CFAA;" d="M403.224,156.715c-28.59,0-51.767,23.176-51.767,51.766l0,0c0,28.59,23.178,51.767,51.767,51.767l0,0
                c0.049,0,0.099,0,0.148,0c0.016,0,0.032,0,0.048,0c0.033,0,0.068,0,0.101,0c0.02,0,0.038,0,0.057,0c0.041,0,0.083-0.001,0.124-0.001
                c0.032,0,0.063-0.001,0.095-0.001c0.015,0,0.03,0,0.046,0c0.036,0,0.071-0.001,0.107-0.001c0.003,0,0.006,0,0.008,0
                c4.93-0.069,9.69-0.835,14.195-2.19c-21.311-6.409-36.839-26.173-36.839-49.572s15.528-43.162,36.839-49.57
                c-4.506-1.355-9.268-2.121-14.199-2.19c0,0,0,0-0.001,0c-0.037,0-0.073-0.001-0.109-0.001c-0.014,0-0.028,0-0.042,0
                c-0.037,0-0.075-0.001-0.113-0.001c-0.037,0-0.075,0-0.111-0.001c-0.018,0-0.036,0-0.054,0c-0.034,0-0.069,0-0.102,0
                c-0.016,0-0.032,0-0.047,0C403.323,156.715,403.274,156.715,403.224,156.715"/>
              </svg>
              <p class="text-center m-2">No Team Members to Display</p>
            <% end %>
        </div>
        <!-- /Widget Content -->
      <!-- /Team Members -->
      <.live_component module={WidgetFooterComponent} id={"#{widget_data.id}-footer"} widget_data={widget_data} />
    </.live_component>
    """
  end
end
